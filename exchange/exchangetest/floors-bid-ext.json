{
    "description": "Verifies bid.ext.prebid for floors",
    "floor_enabled": true,
    "incomingRequest": {
      "ortbRequest": {
        "id": "some-request-id",
        "site": {
          "domain": "test.somedomain.com"
        },
        "imp": [
          {
            "id": "my-imp-id",
            "video": {
              "placement": 1,
              "mimes": [
                "video/mp4"
              ]
            },
            "bidfloor": 5,
            "bidfloorcur": "USD",
            "ext": {
              "prebid": {
                "bidder": {
                  "appnexus": {
                    "placementId": 1
                  }
                }
              }
            }
          }
        ],
        "ext": {
          "prebid": {
            "floors": {
              "data": {
                "currency": "USD",
                "modelgroups": [
                  {
                    "modelweight": 40,
                    "modelversion": "version1",
                    "default": 2,
                    "values": {
                      "video-instream|*|test.somedomain.com": 16
                    },
                    "schema": {
                      "fields": [
                        "mediaType",
                        "size",
                        "domain"
                      ],
                      "delimiter": "|"
                    }
                  }
                ]
              },
              "enabled": true,
              "floormin": 2
            }
          }
        }
      }
    },
    "outgoingRequests": {
      "appnexus": {
        "expectRequest": {
          "ortbRequest": {
            "id": "some-request-id",
            "site": {
                "domain": "test.somedomain.com"
            },
            "imp": [
              {
                "id": "my-imp-id",
                "video": {
                  "placement": 1,
                  "mimes": [
                    "video/mp4"
                  ]
                },
                "bidfloor": 16,
                "bidfloorcur": "USD",
                "ext": {
                  "bidder": {
                    "placementId": 1
                  }
                }
              }
            ],
            "ext": {
              "prebid": {
                "server": {
                  "datacenter": "Datacenter",
                  "externalurl": "http://hosturl.com",
                  "gvlid": 1
                }
              }
            }
          }
        },
        "mockResponse": {
          "pbsSeatBids": [
            {
              "pbsBids": [
                {
                  "ortbBid": {
                    "id": "apn-bid",
                    "impid": "my-imp-id",
                    "price": 0.3,
                    "w": 200,
                    "h": 250,
                    "crid": "creative-1",
                    "ext": {
                      "origbidcpm": 0.3,
                      "someField": "someValue"
                    }
                  },
                  "bidType": "video"
                }
              ],
              "seat": "appnexus"
            }
          ]
        }
      }
    },
    "response": {
      "bids": {
        "id": "some-request-id",
        "seatbid": [
          {
            "seat": "appnexus",
            "bid": [
              {
                "id": "apn-bid",
                "impid": "my-imp-id",
                "price": 0.3,
                "w": 200,
                "h": 250,
                "crid": "creative-1",
                "ext": {
                  "origbidcpm": 0.3,
                  "someField": "someValue",
                  "prebid": {
                    "type": "video",
                    "floors": 
                      {
                        "floorCurrency":"USD", 
                        "floorRule":"video-instream|*|test.somedomain.com", 
                        "floorRuleValue":16, 
                        "floorValue":16
                      }
                  }
                }
              }
            ]
          }
        ]
      }
    }
  }